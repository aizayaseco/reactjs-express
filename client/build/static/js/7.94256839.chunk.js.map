{"version":3,"sources":["containers/Pexel/index.js"],"names":["Pexel","_feed$photos","_pager$pages","_pager$pages2","page","useParams","feed","setFeed","useState","currentPage","setPage","parseInt","pager","setPager","isLoading","setIsLoading","error","setErr","getPexelImgs","appHistory","push","axios","get","concat","then","response","data","totalItems","pageSize","startPage","endPage","totalPages","Math","floor","pages","Array","keys","map","i","getPager","total_results","per_page","catch","useEffect","React","createElement","className","role","photos","photo","key","id","src","original","alt","photographer","length","aria-label","onClick","tabIndex","pageIndex","index"],"mappings":"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","file":"static/js/7.94256839.chunk.js","sourcesContent":["/**\n *\n * Pexel\n *\n */\n\nimport React from 'react';\nimport axios from \"axios\";\nimport { useEffect,useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { appHistory } from '../../App';\n\nexport default function Pexel(){\n  const { page } = useParams();\n\n  const [feed, setFeed] = useState([]);\n  const [currentPage, setPage] = useState(parseInt(page));\n  const [pager, setPager] = useState({\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setErr] = useState(null);\n\n  useEffect(() => {\n    setIsLoading(true);\n    getPexelImgs();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    setIsLoading(true);\n    getPexelImgs();\n  }, [currentPage]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  function getPexelImgs(){\n    if(currentPage*6>8000){\n      appHistory.push('/feed/'+(1333))\n      return setPage(1333)\n    }else if(currentPage<1){\n      appHistory.push('/feed/'+(1))\n      return setPage(1)\n    }\n\n    axios\n      .get(`/api/v1/feed/${currentPage}`,)\n      .then(response =>{\n        return response.data;\n      })\n      .then(data => {\n        setFeed(data);\n        setPager(getPager(data.total_results,data.page,data.per_page))\n        setIsLoading(false);\n      })\n      .catch(error => {setErr(error);setIsLoading(false);});\n  }\n\n  function getPager(totalItems, currentPage, pageSize) {\n    // default to first page\n    currentPage = currentPage || 1;\n\n    // default page size is 10\n    pageSize = pageSize || 10;\n\n    // calculate total pages\n    let totalPages = Math.floor(totalItems / pageSize);\n\n    let startPage, endPage;\n    if (totalPages <= 5) {\n      // less than 10 total pages so show all\n      startPage = 1;\n      endPage = totalPages;\n    } else {\n      // more than 10 total pages so calculate start and end pages\n      if (currentPage <= 3) {\n        startPage = 1;\n        endPage = 5;\n      } else if (currentPage + 2 >= totalPages) {\n        startPage = totalPages - 4;\n        endPage = totalPages;\n      } else {\n        startPage = currentPage - 2;\n        endPage = currentPage + 2;\n      }\n    }\n\n    // calculate start and end item indexes\n    //let startIndex = (currentPage - 1) * pageSize;\n    //let endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1);\n\n    // create an array of pages to ng-repeat in the pager control\n    let pages = [...Array(endPage + 1 - startPage).keys()].map(\n      i => startPage + i\n    );\n\n    // return object with all pager properties required by the view\n    return {\n      totalItems: totalItems,\n      startPage: startPage,\n      endPage: endPage,\n      pages: pages\n    };\n  };\n\n  return (\n    <div>\n      <div>\n        <div className=\"card-columns\">\n          {!isLoading && error === null ? (\n            feed?.photos?.map(photo => {\n                return (\n                <div key={photo.id} className=\"card\">\n                <img className=\"card-img-top\" src={photo.src.original} alt={photo.alt}></img>\n                <div className=\"card-body\">\n                  <h5 className=\"card-title\">Shot by {photo.photographer}</h5>\n                  <p className=\"card-text\">{photo.alt}</p>\n                </div>\n                </div>\n              )\n            })\n          ) : (\n            \n            <div className=\"container-fluid px-0\">\n              <div className=\"col-12 justify-content-center\">\n                <div className=\"spinner-border\" role=\"status\">\n                  <span className=\"sr-only\">Loading...</span>\n                </div>\n              </div>\n            </div>\n          )}\n          </div>\n          {pager?.pages?.length<=1 ? null: (\n          <nav aria-label=\"Page navigation example\">\n            <ul className=\"pagination justify-content-center\">\n              <li className={`page-item ${currentPage === 1? 'disabled': ''}`}>\n                <button className=\"page-link\" onClick={() => {appHistory.push('/feed/'+(currentPage-1));setPage(currentPage-1)}}tabIndex=\"-1\">Previous</button>\n              </li>\n              {pager?.pages?.map((pageIndex, index) => (\n                <li key={index} className={`page-item ${currentPage === pageIndex ? 'active': ''}`}>\n                  <button onClick={() => {appHistory.push('/feed/'+(pageIndex)); setPage(pageIndex)}} className=\"page-link\">{pageIndex}</button>\n                </li>\n              ))}\n              <li className={`page-item ${ currentPage === pager?.endPage ? 'disabled': ''}`}>\n                <button className=\"page-link\" onClick={() => {appHistory.push('/feed/'+(currentPage+1)); setPage(currentPage+1)}}>Next</button>\n              </li>\n            </ul>\n          </nav>\n          )\n          }\n        </div>\n    </div>\n  );\n}\n\n"],"sourceRoot":""}